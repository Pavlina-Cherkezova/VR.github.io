<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

    <script src="three.min.js"></script>
    <script src="OrbitControls.js"></script>
    <script src="WebGL.js"></script>
    <script src="vax.js"></script>
    <script src="StereoEffect.js"></script>
</head>

<body>
    <script>
        vaxInitParallax();

        light.position.set( 0, 0, 0 );
        camera.position.set(0, 0, 0);
        camera.lookAt(new THREE.Vector3(0, 0, 0));
        camera.fov = 90;

        window.addEventListener("deviceorientation", deviceOrientation, true);

        function deviceOrientation(event) {
            var alpha = event.alpha,
                gamma = event.gamma;

            if (alpha === null) return;
            if (gamma >= 0)
                gamma = 90 - gamma;
            else {
                alpha = alpha + 180;
                gamma = -90 - gamma;
            }

            alpha = THREE.Math.degToRad(alpha);
            gamma = THREE.Math.degToRad(gamma);

            camera.rotation.set(gamma, alpha, 0, 'YZX')
        }

        scene.background = new THREE.CubeTextureLoader().load([
            'green-gridC.jpg', 'green-gridC.jpg',
            'green-gridC.jpg', 'green-gridC.jpg',
            'green-gridC.jpg', 'green-gridC.jpg']);

        var coneGeometry = new THREE.ConeBufferGeometry(8, 30, 100);
        for (let i = 0; i < 200; i++) {
            let cone = new THREE.Mesh(
                coneGeometry,
                new THREE.MeshStandardMaterial({ color: new THREE.Color(0.5 + Math.random(), 0.5 + Math.random(), 0.5 + Math.random()) })
            );
            cone.position.set(THREE.Math.randFloat(-250, 250), THREE.Math.randFloat(-250, 250), THREE.Math.randFloat(-250, 250));
            scene.add(cone);
        }
    </script>
</body>

</html>